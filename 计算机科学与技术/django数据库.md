## 数据库迁移

1. 数据备份：django自带命令
2. 表结构同步：将迁移目标数据库和源数据库进行数据结构同步，django自带命令
3. 数据迁移：即将第一步备份的数据导入到新数据库。

## 应该被索引的字段

1. 需要排序操作的字段（order_by)

2. 需要比较操作的字段（>,<,>=,<=)

3. 需要过滤操作的字段（filter,exclude）

4. django定义索引的方式

   1）在属性中定义索引

   2）在Meta类中定义索引，还可定义组合索引

## 关系映射

1. 一对一：oneToOneField
2. 一对多:ForeignKey
3. 多对多:ManyToManyField

## 懒加载

1. 存在于外键和多对多的关系
2. 不检索关联对象的数据
3. 调用关联对象会再次查询数据库

## 预加载

1. 外键：select_related
2. 多对多：prefetch_related

## 查询优化

1. 利用django的迭代器查询数据量大的sql